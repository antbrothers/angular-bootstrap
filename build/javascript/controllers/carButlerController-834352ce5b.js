"use strict";var myControllers=angular.module("carButlerController",[]);myControllers.controller("carButlerCtrl",["$scope","$timeout","$stateParams","carButlerService","$location",function(e,r,o,n,a){function t(r){n.getNearPark(r.position.lng,r.position.lat).success(function(r){$.helpTool().loading().close(),console.log(r),"0"==r.errorNum?e.parkingId=r.parkingList[0].parking_id:$.helpTool().errorWarning("",{desc:r.errorInfo})}).error(function(e){$.helpTool().loading().close(),$.helpTool().errorWarning("",{desc:"服务繁忙"})})}function i(e){$.helpTool().loading().close(),$.helpTool().errorWarning("",{desc:"定位失败"})}console.log("车管家"),$.helpTool().loading().open(),e.imgLink={},e.parkingId={},n.getCarButlerImage().success(function(o){e.imgArr=o.eventPageList,r(function(){e.swiper=new Swiper(".swiper-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationClickable:!0,autoplay:2500,autoplayDisableOnInteraction:!1,spaceBetween:30})},0)}).error(function(){console.log("Error")}),n.getMenu().success(function(r){"0"==r.errorNum?e.menuArr=r.srvList:$.helpTool().errorWarning("",{desc:r.errorInfo})}).error(function(){$.helpTool().errorWarning("",{desc:"服务器繁忙"})});var c,l;c=new AMap.Map("mapcontainer",{resizeEnable:!0}),c.plugin("AMap.Geolocation",function(){l=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),c.addControl(l),l.getCurrentPosition(),AMap.event.addListener(l,"complete",t),AMap.event.addListener(l,"error",i)}),e.selectMenu=function(r){switch(r){case 1:a.path("/home/illegaQuery");break;case 2:a.path("/home/gasCard");break;case 3:a.path("/home/cleanCar");break;case 4:e.instructe(e.parkingId,r);break;case 5:e.instructe(e.parkingId,r);break;case 6:$.helpTool().errorWarning("",{desc:"敬请期待"});break;case 7:a.path("/home/rentCar");break;case 8:e.instructe(e.parkingId,r);break;case 9:break;case-1:}},e.instructe=function(r,o){n.getServeInfo(e.parkingId,o).success(function(e){"0"==e.errorNum?(console.log(e),$.helpTool().instructe(e.srvInfo)):"1"==e.errorNum?$.helpTool().errorWarning("",{desc:"当前停车场服务暂未开通，敬请期待..."}):$.helpTool().errorWarning("",{desc:e.errorInfo})}).error(function(){$.helpTool().errorWarning("",{desc:"服务器繁忙"})})}}]);